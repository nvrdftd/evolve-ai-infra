# Default values for agent-service
# This is a YAML-formatted file.
# Override these values using values-dev.yaml, values-prod.yaml, etc.

application:
  applicationName: agent-service

  deployment:
    replicas: 2
    image:
      repository: ghcr.io/your-org/evolve-ai-infra/agent
      tag: latest
      pullPolicy: IfNotPresent

    securityContext:
      runAsNonRoot: true
      runAsUser: 1001
      fsGroup: 1001
      readOnlyRootFilesystem: true
      allowPrivilegeEscalation: false
      capabilities:
        drop:
          - ALL

    livenessProbe:
      enabled: true
      httpGet:
        path: /health
        port: 3000
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3

    readinessProbe:
      enabled: true
      httpGet:
        path: /health
        port: 3000
      initialDelaySeconds: 10
      periodSeconds: 5
      timeoutSeconds: 3
      failureThreshold: 2

    resources:
      requests:
        memory: "256Mi"
        cpu: "250m"
      limits:
        memory: "512Mi"
        cpu: "500m"

  service:
    enabled: true
    ports:
      - port: 80
        targetPort: 3000
        protocol: TCP
        name: http

  serviceAccount:
    enabled: true
    name: agent-service-sa

  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70

  pdb:
    enabled: true
    minAvailable: 1
